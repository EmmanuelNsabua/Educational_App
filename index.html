<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Révisions Électricité</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .card {
            transition: transform 0.6s;
            transform-style: preserve-3d;
            min-height: 250px;
        }
        .card.flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            padding: 1.5rem;
        }
        .card-front {
            background: white;
        }
        .card-back {
            background: #f0f9ff;
            transform: rotateY(180deg);
        }
        .flip-btn {
            margin-top: auto;
            align-self: flex-end;
        }
    </style>
</head>
<body class="bg-gray-50 pb-16">
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-blue-600 mb-2">Révisions d'Électricité</h1>
            <p class="text-gray-600">Appuyez sur "Retourner" pour voir les réponses</p>
        </header>

        <div id="revision-container" class="flex flex-col gap-6">
            <!-- Les cartes seront générées par JavaScript -->
        </div>
    </div>

    <!-- Bottom Navbar -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200">
        <div class="flex justify-around">
            <a href="index.html" class="flex flex-col items-center py-3 px-6 text-blue-600 font-medium">
                <i class="fas fa-book-open mb-1"></i>
                <span>Révision</span>
            </a>
            <a href="quiz.html" class="flex flex-col items-center py-3 px-6 text-gray-500 hover:text-blue-600">
                <i class="fas fa-question-circle mb-1"></i>
                <span>Quiz</span>
            </a>
        </div>
    </nav>

    
    <script>
        // Fonction pour charger les données JSON
        async function loadRevisionData() {
            try {
                const response = await fetch('revision-data.json');
                if (!response.ok) throw new Error('Erreur de chargement');
                return await response.json();
            } catch (error) {
                console.error("Erreur:", error);
                // Retourne des données par défaut si échec
                return [
                    {
                        question: "Erreur de chargement",
                        answer: "Impossible de charger les données",
                        details: ["Veuillez vérifier le fichier JSON"]
                    }
                ];
            }
        }

        // Création des cartes avec les données chargées
        async function createCards() {
            const container = document.getElementById('revision-container');
            const revisionData = await loadRevisionData();
            
            if (!revisionData || revisionData.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-10 text-gray-500">
                        <i class="fas fa-exclamation-triangle text-3xl mb-3"></i>
                        <p>Aucune donnée de révision disponible</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = ''; // Vide le conteneur
            
            revisionData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'card bg-white rounded-xl shadow-md relative';
                card.innerHTML = `
                    <div class="card-face card-front">
                        <h3 class="text-xl font-bold text-blue-600 mb-4">Question ${index + 1}</h3>
                        <p class="text-gray-700 mb-4 flex-grow">${item.question}</p>
                        <button class="flip-btn px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition">
                            <i class="fas fa-redo mr-2"></i>Retourner
                        </button>
                    </div>
                    <div class="card-face card-back">
                        <h3 class="text-xl font-bold text-blue-600 mb-4">Réponse</h3>
                        <div class="flex-grow">
                            <p class="text-green-600 font-bold mb-2">${item.answer}</p>
                            <div class="text-gray-700 space-y-2">
                                ${item.details.map(detail => `<p>• ${detail}</p>`).join('')}
                            </div>
                        </div>
                        <button class="flip-btn px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition">
                            <i class="fas fa-redo mr-2"></i>Retourner
                        </button>
                    </div>
                `;

                const flipBtns = card.querySelectorAll('.flip-btn');
                flipBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        card.classList.toggle('flipped');
                    });
                });

                container.appendChild(card);
            });
        }

        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', createCards);
    </script>
</body>
</html>
